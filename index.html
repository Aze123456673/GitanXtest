<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8" />
<title>Obfuscateur Lua - WeAreDevs v1 Style (2026)</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<style>
  body {
    font-family: 'Segoe UI', sans-serif;
    background: linear-gradient(135deg, #0a0015, #180033);
    color: #d0b0ff;
    margin: 0;
    padding: 20px;
  }
  .container { max-width: 1200px; margin: auto; }
  h1 { color: #bb55ff; text-align: center; margin-bottom: 0.5em; }
  .split { display: grid; grid-template-columns: 1fr 1fr; gap: 24px; margin: 24px 0; }
  textarea {
    width: 100%;
    height: 440px;
    background: #111122;
    color: #e0d0ff;
    border: 1px solid #553366;
    border-radius: 8px;
    padding: 16px;
    font-family: 'Consolas', monospace;
    font-size: 14px;
    resize: vertical;
    line-height: 1.4;
  }
  button {
    display: block;
    margin: 24px auto;
    padding: 16px 70px;
    font-size: 1.4rem;
    background: #7f00ff;
    color: white;
    border: none;
    border-radius: 8px;
    cursor: pointer;
    transition: all 0.25s;
  }
  button:hover { background: #a040ff; transform: scale(1.05); }
  #result {
    background: #0c0014;
    border: 1px solid #442255;
    border-radius: 8px;
    padding: 20px;
    white-space: pre-wrap;
    font-family: monospace;
    min-height: 240px;
    color: #aaffaa;
    line-height: 1.45;
  }
  .info { text-align: center; color: #aa88ff; font-size: 1rem; margin: 12px 0; }
</style>
</head>
<body>

<div class="container">
  <h1>Obfuscateur Lua - Style WeAreDevs v1</h1>
  <div class="info">Colle ton code Lua â†’ Obfusque â†’ RÃ©sultat Ã  exÃ©cuter avec loadstring() sur Roblox</div>

  <div class="split">
    <div>
      <strong>Code original :</strong>
      <textarea id="input" placeholder="Colle ton script Lua ici... (print('Hello Roblox!') par exemple)"></textarea>
    </div>
    <div>
      <strong>Code obfusquÃ© (WeAreDevs v1 style) :</strong>
      <textarea id="result" readonly></textarea>
    </div>
  </div>

  <button onclick="obfuscate()">OBFUSQUER STYLE WeAreDevs ðŸ”¥</button>
</div>

<script>
// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
//   Obfuscateur JS style WeAreDevs v1 (2026)
// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

function randomOffset(min = -600, max = 600) {
  return Math.floor(Math.random() * (max - min + 1)) + min;
}

function toOctalString(str) {
  let result = "";
  for (let i = 0; i < str.length; i++) {
    result += "\\" + str.charCodeAt(i).toString(8).padStart(3, "0");
  }
  return result;
}

function obfuscate() {
  const input = document.getElementById("input").value.trim();
  const resultArea = document.getElementById("result");

  if (!input) {
    resultArea.value = "// Mets du code quand mÃªme bg ðŸ˜";
    return;
  }

  let code = input;

  // 1. RÃ©cupÃ©rer et encoder toutes les strings en octal
  const stringTable = [];
  code = code.replace(/(["'])(?:(?=(\\?))\2.)*?\1/g, (match) => {
    const content = match.slice(1, -1);
    if (content.length < 3 || content.includes('\\')) return match;

    stringTable.push(`"${toOctalString(content)}"`);
    return `__STR${stringTable.length - 1}__`;
  });

  // 2. Table de strings encodÃ©es
  const strTable = `local b={${stringTable.join(",")}}`;

  // 3. Table de mapping caractÃ¨re â†’ offset (style WeAreDevs)
  const mapping = {};
  const chars = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789_";
  for (let i = 0; i < chars.length; i++) {
    const c = chars[i];
    mapping[c] = randomOffset(-800, 800);
  }

  let mapCode = "local o={";
  for (const [char, offset] of Object.entries(mapping)) {
    mapCode += `${char}=${offset},`;
  }
  mapCode = mapCode.slice(0, -1) + "}";  // retire la derniÃ¨re virgule

  // 4. Fonction de dÃ©codage trÃ¨s proche du style WeAreDevs v1
  const decoder = `
local function d(i)
  local s=b[i]
  local r=""
  local pos=1
  local count=0
  while pos<=#s do
    local prefix=s:sub(pos,pos)
    pos=pos+1
    local num=s:sub(pos,pos+2)
    pos=pos+3
    local byte=tonumber(num,8)
    byte=byte+(o[prefix] or 0)
    count=count+1
    if count%3==0 then byte=byte-1
    elseif count%5==0 then byte=byte+2
    elseif count%7==0 then byte=byte-3 end
    r=r..string.char(byte)
  end
  return r
end
`;

  // 5. Remplacer les placeholders par d(index)
  code = code.replace(/__STR(\d+)__/g, (m, idx) => `d(${parseInt(idx) + 1})`);

  // 6. Junk code (lÃ©ger mais prÃ©sent)
  const junkLines = [
    "if false then end",
    "for _=1,0 do end",
    "local _=nil",
    "repeat until true",
    "-- skrrt",
    "local _=math.random()"
  ];

  let lines = code.split("\n");
  let newLines = [];
  for (const line of lines) {
    newLines.push(line);
    if (Math.random() < 0.25 && line.trim() && !line.includes("--")) {
      newLines.push("  " + junkLines[Math.floor(Math.random() * junkLines.length)]);
    }
  }
  code = newLines.join("\n");

  // 7. Assemblage final - structure classique WeAreDevs
  const finalCode = `-- ObfusquÃ© le ${new Date().toLocaleDateString()} ðŸ”¥
-- Style WeAreDevs v1-ish

return (function(...)
${strTable}
${mapCode}
${decoder}

${code}

end)(...)
`;

  resultArea.value = finalCode;
}
</script>
</body>
</html>
