<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8" />
<title>Obfuscateur Lua Roblox - Niveau Moyen 2026</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<style>
  body {
    font-family: 'Segoe UI', system-ui, sans-serif;
    background: linear-gradient(135deg, #0a0015, #180033);
    color: #d0b0ff;
    margin: 0;
    padding: 20px;
  }
  .container { max-width: 1200px; margin: auto; }
  h1 { color: #bb55ff; text-align: center; margin-bottom: 0.4em; }
  .split {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 20px;
    margin: 20px 0;
  }
  textarea {
    width: 100%;
    height: 380px;
    background: #111122;
    color: #e0d0ff;
    border: 1px solid #553366;
    border-radius: 8px;
    padding: 16px;
    font-family: 'Consolas', 'Courier New', monospace;
    font-size: 14px;
    resize: vertical;
  }
  button {
    display: block;
    margin: 20px auto;
    padding: 14px 50px;
    font-size: 1.3rem;
    background: #7f00ff;
    color: white;
    border: none;
    border-radius: 8px;
    cursor: pointer;
    transition: all 0.25s;
  }
  button:hover { background: #a040ff; transform: scale(1.04); }
  #result {
    background: #0c0014;
    border: 1px solid #442255;
    border-radius: 8px;
    padding: 18px;
    white-space: pre-wrap;
    font-family: monospace;
    min-height: 200px;
    color: #aaffaa;
    line-height: 1.45;
  }
  .info {
    text-align: center;
    color: #aa88ff;
    font-size: 0.9rem;
    margin: 10px 0;
  }
</style>
</head>
<body>

<div class="container">
  <h1>Obfuscateur Lua (Roblox friendly) - 2026</h1>
  <div class="info">Colle ton code â†’ Obfusque â†’ ExÃ©cute le rÃ©sultat avec loadstring()</div>

  <div class="split">
    <div>
      <strong>Code original :</strong>
      <textarea id="input" placeholder="Colle ton script Lua ici..."></textarea>
    </div>
    <div>
      <strong>Code obfusquÃ© :</strong>
      <textarea id="result" readonly></textarea>
    </div>
  </div>

  <button onclick="obfuscate()">OBFUSQUER MAINTENANT ðŸ”¥</button>
</div>

<script>
// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
//   Obfuscateur Lua simple mais efficace (2026)
// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

function randomName() {
  const chars = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ_$";
  let name = "";
  for(let i = 0; i < 18 + Math.floor(Math.random()*12); i++) {
    name += chars[Math.floor(Math.random() * chars.length)];
  }
  return "_" + name;
}

function encodeStringOctal(str) {
  let result = "";
  for(let i = 0; i < str.length; i++) {
    const code = str.charCodeAt(i);
    result += "\\" + code.toString(8).padStart(3, "0");
  }
  return '"' + result + '"';
}

function obfuscate() {
  const input = document.getElementById("input").value.trim();
  const outputArea = document.getElementById("result");

  if (!input) {
    outputArea.value = "// Mets du code quand mÃªme bg ðŸ˜";
    return;
  }

  let code = input;

  // 1. On remplace les strings par version octal
  code = code.replace(/(["'])(?:(?=(\\?))\2.)*?\1/g, (match) => {
    const content = match.slice(1, -1);
    // On Ã©vite d'obfusquer les strings dÃ©jÃ  encodÃ©es ou trÃ¨s courtes
    if (content.length < 4 || content.includes("\\")) return match;
    return encodeStringOctal(content);
  });

  // 2. Renommage agressif des variables locales
  const varMap = new Map();
  const reserved = new Set([
    "and","break","do","else","elseif","end","false","for","function",
    "if","in","local","nil","not","or","repeat","return","then","true",
    "until","while","_G","_ENV","print","warn","error","assert","pcall",
    "xpcall","load","loadstring","getfenv","setfenv","game","script",
    "shared","wait","tick","spawn","delay","coroutine","task"
  ]);

  // Trouver les dÃ©clarations local var = ...
  code = code.replace(/local\s+([a-zA-Z_][a-zA-Z0-9_]*)/g, (full, name) => {
    if (reserved.has(name)) return full;
    if (!varMap.has(name)) {
      varMap.set(name, randomName());
    }
    return `local ${varMap.get(name)}`;
  });

  // Remplacer les utilisations (pas parfait mais efficace sur la plupart des cas)
  for (const [oldName, newName] of varMap) {
    const regex = new RegExp(`\\b${oldName}\\b(?!["'])`, "g");
    code = code.replace(regex, newName);
  }

  // 3. Ajout de junk alÃ©atoire (trÃ¨s lÃ©ger)
  const junkLines = [
    "if false then end ",
    "for _=1,0 do end ",
    "local _=nil;",
    "repeat until true;",
    "-- skrrt ",
    "local _=math.random();"
  ];

  const lines = code.split("\n");
  const newLines = [];
  for (const line of lines) {
    newLines.push(line);
    if (Math.random() < 0.25 && line.trim() && !line.includes("--")) {
      newLines.push("  " + junkLines[Math.floor(Math.random() * junkLines.length)]);
    }
  }

  code = newLines.join("\n");

  // 4. Petit nettoyage esthÃ©tique + commentaire final
  code = code.replace(/\s+/g, " ")
             .replace(/;\s*/g, ";\n")
             .replace(/end\s*/g, "end\n")
             .replace(/then\s*/g, "then\n")
             .replace(/else\s*/g, "else\n")
             .trim();

  code = "-- ObfusquÃ© le " + new Date().toLocaleDateString() + " ðŸ”¥\n" +
         "-- Niveau : Moyen (octal + rename + junk)\n\n" +
         code;

  outputArea.value = code;
}
</script>
</body>
</html>
