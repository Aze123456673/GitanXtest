<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8" />
<title>DÃ©obfuscateur Lua - Grok Edition ðŸ˜ˆ</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<style>
  body {
    font-family: 'Segoe UI', system-ui, sans-serif;
    background: #0f0f1a;
    color: #e0e0ff;
    margin: 0;
    padding: 20px;
    background-image: linear-gradient(135deg, #0f0f1a 0%, #1a0f2a 100%);
  }
  h1 { color: #bb86fc; text-align: center; margin-bottom: 0.4em; }
  textarea {
    width: 100%;
    max-width: 900px;
    height: 240px;
    margin: 12px auto;
    display: block;
    background: #111122;
    color: #d0d0ff;
    border: 1px solid #444466;
    border-radius: 8px;
    padding: 14px;
    font-family: 'Courier New', monospace;
    font-size: 15px;
    resize: vertical;
  }
  button {
    display: block;
    margin: 16px auto;
    padding: 12px 32px;
    font-size: 1.1rem;
    background: #6200ea;
    color: white;
    border: none;
    border-radius: 6px;
    cursor: pointer;
    transition: all 0.2s;
  }
  button:hover { background: #7f39fb; transform: translateY(-2px); }
  #result {
    width: 100%;
    max-width: 900px;
    margin: 20px auto;
    background: #0a0a14;
    border: 1px solid #333355;
    border-radius: 8px;
    padding: 16px;
    white-space: pre-wrap;
    font-family: 'Courier New', monospace;
    min-height: 100px;
    color: #a0ffa0;
  }
  .container { max-width: 960px; margin: 0 auto; }
</style>
</head>
<body>

<div class="container">
  <h1>DÃ©obfuscateur Lua (version street)</h1>
  
  <textarea id="input" placeholder="Colle ton code Lua obfusquÃ© ici..."></textarea>
  
  <button onclick="deobfuscate()">DÃ‰OBFUSQUER ðŸ”¥</button>
  
  <div id="result">Le rÃ©sultat apparaÃ®tra ici...</div>
</div>

<script>
// Les remplacements les plus courants en 2025 (loadstring/load, chain de string.byte, gsub hardcore, etc)
const patterns = [
  // TrÃ¨s classique : loadstring / load(...
  { regex: /loadstring\s*\(/g,     replace: 'load(' },
  { regex: /loadstring/g,          replace: 'load' },
  
  // string.byte / string.char en boucle
  { regex: /string\.byte\s*\(\s*([^,]+?)\s*,\s*([^)]+?)\s*\)/g, 
    replace: (m,p1,p2) => `(${p1} || "").charCodeAt(${p2}-1)` },
  { regex: /string\.char\s*\(\s*([^)]+?)\s*\)/g, 
    replace: (m,args) => `String.fromCharCode(${args})` },
  
  // gsub trÃ¨s utilisÃ© pour decoder
  { regex: /\b_\s*=\s*(\S+)\s*:\s*gsub\s*\(\s*"([^"]+)"\s*,\s*"([^"]*)"\s*\)/g,
    replace: (m, str, pattern, repl) => {
      try {
        const regex = new RegExp(pattern.replace(/[.*+?^${}()|[\]\\]/g,'\\$&'),'g');
        return str.replace(regex, repl);
      } catch(e) { return m; }
    }},
  
  // Les load( [[long string]] ) trÃ¨s frÃ©quents
  { regex: /load\s*\(\s*\[\[([\s\S]*?)\]\]\s*\)/g, (m, code) => {
      try { return code.trim(); } catch { return m; }
    }},
  
  // Beaucoup de (function(a,b,c) ... end)(x,y,z)
  { regex: /\(function\s*\([^)]*\)\s*\{?[\s\S]*?\}\s*\)\s*\([^)]*\)/g, replace: '(...obfu IIFE supprimÃ©e...)' },
  
  // Encore plus sale : 0xXX, \xXX, \u{XXXX} â†’ on convertit vite fait
  { regex: /\\x([0-9a-fA-F]{2})/g, (_, hex) => String.fromCharCode(parseInt(hex,16)) },
  { regex: /\\u\{([0-9a-fA-F]+)\}/g, (_, hex) => String.fromCodePoint(parseInt(hex,16)) },
];

function deobfuscate() {
  let code = document.getElementById('input').value;
  if (!code.trim()) {
    document.getElementById('result').innerHTML = "Mets du code quand mÃªme hein... ðŸ˜";
    return;
  }

  let original = code;

  // On applique tous les patterns dans l'ordre
  for (const p of patterns) {
    if (typeof p.replace === 'function') {
      code = code.replace(p.regex, p.replace);
    } else {
      code = code.replace(p.regex, p.replace);
    }
  }

  // Petit nettoyage final
  code = code
    .replace(/\s+/g, ' ')
    .replace(/;\s*/g, ';\n')
    .replace(/{\s*/g, '{\n  ')
    .replace(/\s*}/g, '\n}')
    .trim();

  const resultDiv = document.getElementById('result');
  resultDiv.innerHTML = code || "(rien de lisible rÃ©cupÃ©rÃ©... essaie un autre obfu)";
  
  // Petit feedback visuel
  resultDiv.style.color = code.length > 50 ? "#a0ffa0" : "#ff9999";
}
</script>
</body>
</html>
